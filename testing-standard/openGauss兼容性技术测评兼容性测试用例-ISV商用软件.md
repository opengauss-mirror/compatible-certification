目 录

[1 范围 5](#_Toc256000001)

[2 规范性引用文件 6](#_Toc256000002)

[3 术语和定义 7](#_Toc256000003)

[4 缩略语 8](#_Toc256000004)

[5 测试对象 9](#_Toc256000005)

[6 测试工具 10](#_Toc256000006)

[7 测试方案 11](#_Toc256000007)

[7.1 总体要求 11](#_Toc256000008)

[7.2 用例设计 11](#_Toc256000009)

[8 测试用例 13](#_Toc256000010)

[8.1 构建测试 13](#_Toc256000011)

[8.1.1 软件构建测试 13](#软件构建测试)

[8.2 兼容性测试 13](#_Toc256000013)

[8.2.1 软件包安装测试 13](#软件包安装测试)

[8.2.2 软件包卸载测试 14](#软件包卸载测试)

[8.2.3 软件服务启动测试 14](#软件服务启动测试)

[8.2.4 软件服务停止测试 15](#软件服务停止测试)

[8.2.5 强制杀死进程测试 15](#强制杀死进程测试)

[8.2.6 软件命令调用测试 16](#软件命令调用测试)

[8.2.7 软件包依赖库查询测试 16](#软件包依赖库查询测试)

[8.2.8 软件迁移差异识别测试 17](#软件迁移差异识别测试)

[8.3 性能测试 17](#_Toc256000022)

[8.3.1 CPU资源测试 17](#cpu资源测试)

[8.3.2 内存资源测试 18](#内存资源测试)

[8.3.3 硬盘资源测试 19](#硬盘资源测试)

[8.3.4 网络资源测试 20](#网络资源测试)

[8.3.5 压力长稳测试 21](#压力长稳测试)

[8.4 安全测试 22](#_Toc256000028)

[8.4.1 端口安全测试 22](#端口安全测试)

[8.4.2 病毒扫描 22](#病毒扫描)

[8.4.3 CVE漏洞扫描 23](#cve漏洞扫描)

[9 测试报告 24](#_Toc256000032)

[10 参考文献 25](#_Toc256000033)

[A 修订记录 26](#_Toc256000034)

# 范围

本文件描述了openEuler在ISV产品的兼容性测试方法。

本文件适应于ISV产品的兼容性测试和评估。

# 规范性引用文件

本文件没有规范性引用文件。

# 术语和定义

下列术语及定义适应于本文件。

1.  术语及定义

| 术语       | 定义                                                                                                                                                                                                                                                     |
|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 兼容性测试 | 软件兼容性测试是指检查软件之间能否正确地进行交互和共享信息。随着用户对来自各种类型软件之间共享数据能力和充分利用空间同时执行多个程序能力的要求，测试软件之间能否协作变得越来越重要。软件兼容性测试工作的目标是保证软件或硬件按照用户期望的方式进行交互。 |

# 缩略语

下列缩略语适用于本文件。

1.  本文件涉及缩略语

| 缩略语 | 名称                                  | 定义                                                                                                                                     |
|--------|---------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| CPU    | 中央处理器（Central Processing Unit） | 中央处理器是计算机的主要设备之一，其功能是解释计算机指令以及处理计算机软件中的数据，与内部存储器、输入及输出设备成为现代电脑的三大部件。 |

# 测试对象

本文件的测试对象为ISV的商用产品。

ISV产品测试运行在安装有openEuler社区版的服务器上，通过兼容性测试工具套进行测试。

1.  测试组网

![](docs/e1613ecb55a9f90d101421879163ae39.png)

# 测试工具

1.  ISV产品兼容性测试工具

| 测试工具   | 用途                                        |
|------------|---------------------------------------------|
| compass-ci | 用于验证OS厂商跟ISV产品的兼容性的测试套件。 |

# 测试方案

[7.1 总体要求](#总体要求)

[7.2 用例设计](#用例设计)

## 总体要求

ISV产品的测试执行达到预期结果，无报错。

## 用例设计

1.  整机兼容性测试用例集

| **编号** | **用例分类**  | **用例名称**       | **测试工具** | **说明** |
|----------|--------------|--------------------|--------------|----------|
| 1        | 构建测试      | 软件构建测试        | compass-ci  |          |
| 2        | 兼容性测试    | 软件包安装测试     | compass-ci   |          |
| 3        |              | 软件包卸载测试     | compass-ci   |          |
| 4        |              | 软件服务启动测试   | compass-ci   |          |
| 5        |              | 软件服务停止测试   | compass-ci   |          |
| 6        |              | 强制杀死进程测试   | compass-ci   |          |
| 7        |              | 软件命令调用测试   | compass-ci   |          |
| 8        |              | 软件依赖库查询     | compass-ci   |          |
| 9        |              | 软件依赖包识别     | compass-ci   |          |
| 10        |              | 软件依赖库差异识别 | compass-ci   |          |
| 11       |              | 软件接口差异识别   | compass-ci   |          |
| 12       | 性能测试      | CPU波动测试       | compass-ci   |          |
| 13       |              | 内存波动测试       | compass-ci   |          |
| 14       |              | 磁盘波动测试       | compass-ci   |          |
| 15       |              | 网络波动测试       | compass-ci   |          |
| 16       |              | 压力长稳测试       | compass-ci   |          |
| 17       | 安全测试      | 端口安全测试       | compass-ci   |          |
| 18       |              | 病毒扫描测试       | compass-ci   |          |
| 19       |              | CVE漏洞扫描测试    | compass-ci   |          |

# 测试用例

[8.1 构建测试](#构建测试)

[8.2 兼容性测试](#兼容性测试)

[8.3 性能测试](#性能测试)

[8.4 安全测试](#安全测试)

## 构建测试

### 软件构建测试

## 兼容性测试

### 软件包安装测试

1.  软件包安装测试

| 用例名称 | 软件安装测试                                                                                                                              |
|----------|-------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SoftwareInstall                                                                                                                           |
| 测试目的 | 目标软件可以在指定架构、操作系统上安装成功                                                                                                |
| 预置条件 | 软件编译成功，并已上传至oepkgs仓库中，仓库数据完成更新，仓库可用 已挂载指定操作系统的os、everything、epol仓库，以及对应的第三方oepkgs仓库 |
| 测试步骤 | 使用yum命令，对软件进行安装，检查命令执行的退出状态，根据退出状态，输出不同的测试日志 退出码非零，则判断安装测试失败                      |
| 预期结果 | 软件成功安装，目前暂未指定安装版本，安装成功之后继续执行后续的软件兼容性测试项。                                                          |
| 备注     | 所有测试结果都存入es数据库，可通过前端页面查询。                                                                                          |

### 软件包卸载测试

1.  软件包卸载测试

| 用例名称 | 软件卸载测试                                                                                                         |
|----------|----------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SoftwareUninstall                                                                                                    |
| 测试目的 | 目标软件可以在指定架构、操作系统上卸载成功                                                                           |
| 预置条件 | 软件已成功安装                                                                                                       |
| 测试步骤 | 使用yum命令，对软件进行卸载，检查命令执行的退出状态，根据退出状态，输出不同的测试日志 退出码非零，则判断卸载测试失败 |
| 预期结果 | 软件成功卸载                                                                                                         |
| 备注     | 所有测试结果都存入es数据库，可通过前端页面查询。                                                                     |

### 软件服务启动测试

1.  软件启动测试

| 用例名称 | 软件服务启动测试                                                                                                                                                                                                                                                     |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SoftwareStart                                                                                                                                                                                                                                                        |
| 测试目的 | 目标软件可以在指定架构、操作系统上停止服务成功                                                                                                                                                                                                                       |
| 预置条件 | 软件已成功安装。                                                                                                                                                                                                                                                     |
| 测试步骤 | 执行如下命令，查询软件包中是否存在.service文件： rpm -ql \$softwareName \| grep -E "\\.service\$" \| awk -F "/" '{print \$NF}' 使用systemctl命令停止软件服务，检查命令执行的退出码，输出不同的测试日志，退出码非零，则判断停止服务失败 systemctl stop \$softwareName |
| 预期结果 | 停止软件服务成功                                                                                                                                                                                                                                                     |
| 备注     | 所有测试结果都存入es数据库，可通过前端页面查询。                                                                                                                                                                                                                     |

### 软件服务停止测试

1.  软件停止测试

| 用例名称 | 软件服务停止测试                                                                                                                                                                                                                                                                                                                |
|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SoftwareStop                                                                                                                                                                                                                                                                                                                    |
| 测试目的 | 目标软件可以在指定架构、操作系统上启动服务成功                                                                                                                                                                                                                                                                                  |
| 预置条件 | 软件已成功启动                                                                                                                                                                                                                                                                                                                  |
| 测试步骤 | 执行如下命令，查询软件包中是否存在.service文件： rpm -ql \$softwareName \| grep -E "\\.service\$" \| awk -F "/" '{print \$NF}' 使用systemctl命令对软件服务进行启动，以及服务状态测试，检查命令执行的退出码， 输出不同的测试日志，退出码非零，则判断服务启动失败 systemctl start \$softwareName  systemctl status \$softwareName |
| 预期结果 | 软件服务停止成功                                                                                                                                                                                                                                                                                                                |
| 备注     | 所有测试结果都存入es数据库，可通过前端页面查询。                                                                                                                                                                                                                                                                                |

### 强制杀死进程测试

1.  强制杀死进程测试

| 用例名称 | 强制杀死进程测试                                                                                                                                                                                                                               |
|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | StabilityKillProc                                                                                                                                                                                                                              |
| 测试目的 | 模拟目标软件异常终止的场景。                                                                                                                                                                                                                   |
| 预置条件 | 软件正常安装。 软件已完成配置。 获取到运行软件的进程名称，如被测的软件为mysql，则测试步骤3命令为：ps -aux \| grep -i myql。                                                                                                                    |
| 测试步骤 | 按照软件运行指导书运行软件。 正常启动软件，保证一定的运行压力。 软件运行过程中，执行如下命令，查询进程的PID。 \# ps -aux \| grep -i Process_Name 执行如下命令，杀死进程，有预期结果A。 \# kill -9 PID 运行软件，有预期结果B。 重复以上步骤10次 |
| 预期结果 | [A] 软件进程被杀死，软件停止运行。 [B] 软件可以正常运行。                                                                                                                                                                                      |
| 备注     |                                                                                                                                                                                                                                                |

### 软件命令调用测试

1.  软件命令调用测试

| 用例名称 | 软件命令调用测试                                                                                                                                                                                                                                    |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SoftwareCmdCall                                                                                                                                                                                                                                     |
| 测试目的 | 目标软件可以在指定架构、操作系统上运行基本的命令                                                                                                                                                                                                    |
| 预置条件 | 软件已启动成功                                                                                                                                                                                                                                      |
| 测试步骤 | 执行如下命令，查询软件包中是否在bin或sbin目录下面存在可执行文件： rpm -ql \$softwareName \| grep -E '/s?bin/' 对查询到的可执行文件，执行--help命令，检查命令执行的退出码 输出不同的测试日志，退出码非零，则判断命令行执行失败 /usr/bin/\$cmd --help |
| 预期结果 | 软件命令行运行成功                                                                                                                                                                                                                                  |
| 备注     | 所有测试结果都存入es数据库，可通过前端页面查询。                                                                                                                                                                                                    |

### 软件包依赖库查询测试

1.  软件依赖库查询测试

| 用例名称 | 软件依赖库查询测试                                                                                                                                                          |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SoftwareDependency                                                                                                                                                          |
| 测试目的 | 目标软件可以在指定架构、操作系统上查询依赖库                                                                                                                                |
| 预置条件 | 软件已成功安装。                                                                                                                                                            |
| 测试步骤 | 执行如下命令，查询软件包中是否在bin\|sbin\|lib\|lib64目录下面存在可执行文件： \# rpm -ql \$i \| awk -F'/' '\$3 \~ /bin\|sbin\|lib\|lib64/' 执行ldd -d -r 命令查询动态依赖库 |
| 预期结果 | 通过ldd命令查询到动态依赖库。                                                                                                                                               |
| 备注     | 所有测试结果都存入es数据库，可通过前端页面查询。                                                                                                                            |

### 软件迁移差异识别测试

1.  软件依赖库差异识别测试

| 用例名称 | 软件从centos7.6到openEuler20.03-LTS-SP1上的差异                                                                                                                                       |
|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | MigrateDifference                                                                                                                                                                     |
| 测试目的 | 对于要评估的软件的依赖包、so库和接口在对应系统真实版本可能会有差异                                                                                                                    |
| 预置条件 | x2openEuler工具已安装 x2openEuler工具完成数据库初始化和centos7.6到openEuler20.03-LTS-SP1的资源包导入                                                                                  |
| 测试步骤 | 1. 执行如下命令，扫描待评估软件包： \# x2openEuler scan -arch aarch64 \$softwareName 2. 查看扫描结果 扫描结果报告保存在/opt/x2openEuler/output/\$softwareName-\$time.html，可下载查看 |
| 预期结果 | 报告最后输出依赖包、so库和接口在centos7.6和openEuler20.03-LTS-SP1上版本差异                                                                                                           |
| 备注     |                                                                                                                                                                                       |

## 性能测试

### CPU资源测试

1.  CPU资源波动测试

| 用例名称 | CPU资源测试                                                                                                                                                                                                                                                                                                                                                                                           |
|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | PerformanceCPU                                                                                                                                                                                                                                                                                                                                                                                        |
| 测试目的 | 目标软件在稳定运行期间的系统资源CPU的波动异常检测。                                                                                                                                                                                                                                                                                                                                                   |
| 预置条件 | 软件已成功安装 已获取软件操作指导书 安装完测试工具 确定性能压力场景，获取性能压力场景测试方法                                                                                                                                                                                                                              | 测试步骤 | 1. 启动被测软件。 根据性能压力场景测试方法配置压力测试环境。 运行测试工具，进行性能压力测试15min，有预期结果A。 <br>2.执行如下命令，启动系统资源监控，每隔一分钟中统计一次数据。 \# sar -u 60 15 \>\> /tmp/cpu_stability.log。 <br>3. 重复执行步骤1、2共三次，采集三组统计数据，有预期结果B。 <br>4. 执行如下命令，观察系统日志warning、error、fail信息，有预期结果C。 \# cat /var/log/messages \| egrep -i 'warning\|error\|fail' <br>5. 关闭被测软件，有预期结果D。 |
| 预期结果 | [A] 软件成功启动，测试工具对被测软件正常压测。 <br>[B] cpu_stability.log日志记录，对比不同组测试结果的%idle记录数据，同个时间段相互比较波动不超过5%。 <br>[C] /var/log/messages日志没有新增的关于被测软件相关的warning、error、fail信息。 <br>[D] 软件正常被关闭。                                                                                                                                                                |
| 备注     | 要求测试报告保留cpu_stability.log和/var/log/messages日志文件。 部分场景下，监控资源长稳过程中表现，在刚启动和关闭阶段会有较大的波动。此时建议数据在稳定期进行比较，开始前3min和关闭前3min数据可不参加比较。                                                                                                                                                                                           |

### 内存资源测试

1.  内存资源波动测试

| 用例名称 | 内存资源测试                                                                                                                                                                                                                                                                                                                                                                                                         |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | PerformanceMemory                                                                                                                                                                                                                                                                                                                                                                                                    |
| 测试目的 | 目标软件在稳定运行期间的系统资源内存的波动异常检测。                                                                                                                                                                                                                                                                                                                                                                 |
| 预置条件 | 软件已成功安装。 已获取软件操作指导书。 安装完测试工具。 确定性能压力场景，获取性能压力场景测试方法。                                                                                                                                                                                                                                                                                                                |
| 测试步骤 | 1. 启动被测软件。 根据性能压力场景测试方法配置压力测试环境。 运行测试工具，进行性能压力测试15min，有预期结果A。 <br>2.执行如下命令，启动系统资源监控，每隔一分钟中统计一次数据。 \# sar -r 60 15 \>\> /tmp/memory_stability.log。 <br>3. 重复执行步骤1、2共三次，采集三组统计数据，有预期结果B。 <br>4. 执行如下命令，观察系统日志warning、error、fail信息，有预期结果C。 \# cat /var/log/messages \| egrep -i 'warning\|error\|fail' <br>5. 关闭被测软件，有预期结果D。 |
| 预期结果 | [A] 软件成功启动，测试工具对被测软件正常压测。 <br>[B] memory_stability.log日志记录，对比不同组测试结果的%memused记录数据，同个时间段相互比较波动不超过5%。 <br>[C] /var/log/messages日志没有新增的关于被测软件相关的warning、error、fail信息。 <br>[D] 软件正常被关闭。                                                                                                                                                                         |
| 备注     | 要求测试报告保留memory_stability.log和/var/log/messages日志文件。 部分场景下，监控资源长稳过程中表现，在刚启动和关闭阶段会有较大的波动。此时建议数据在稳定期进行比较，开始前3min和关闭前3min数据可不参加比较。                                                                                                                                                                                                       |

### 硬盘资源测试

1.  磁盘资源波动测试

| 用例名称 | 硬盘资源测试                                                                                                                                                                                                                                                                                                                                                                                                          |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | PerformanceDisk                                                                                                                                                                                                                                                                                                                                                                                                       |
| 测试目的 | 目标软件在稳定运行期间的系统资源硬盘的波动异常检测。                                                                                                                                                                                                                                                                                                                                                                  |
| 预置条件 | 软件已成功安装。 已获取软件操作指导书。 安装完测试工具。 确定性能压力场景，获取性能压力场景测试方法。                                                                                                                                                                                                                                                                                                                 |
| 测试步骤 | 1. 启动被测软件。 根据性能压力场景测试方法配置压力测试环境。 运行测试工具，进行性能压力测试15min，有预期结果A。 <br>2.执行如下命令，启动系统资源监控，每隔一分钟中统计一次数据。 \# sar -d -p 60 15 \>\> /tmp/disk_stability.log。 <br>3. 重复执行步骤1、2共三次，采集三组统计数据，有预期结果B。 <br>4. 执行如下命令，观察系统日志warning、error、fail信息，有预期结果C。 \# cat /var/log/messages \| egrep -i 'warning\|error\|fail' <br>5. 关闭被测软件，有预期结果D。 |
| 预期结果 | [A] 软件成功启动，测试工具对被测软件正常压测。 <br>[B] disk_stability.log日志记录，对比不同组测试结果的%util记录数据，同个时间段相互比较波动不超过5%。 <br>[C] /var/log/messages日志没有新增的关于被测软件相关的warning、error、fail信息。 <br>[D] 软件正常被关闭。                                                                                                                                                                              |
| 备注     | 要求测试报告保留disk_stability.log和/var/log/messages日志文件。 部分场景下，监控资源长稳过程中表现，在刚启动和关闭阶段会有较大的波动。此时建议数据在稳定期进行比较，开始前3min和关闭前3min数据可不参加比较。                                                                                                                                                                                                          |

### 网络资源测试

1.  网络资源波动测试

| 用例名称 | 网络资源测试                                                                                                                                                                                                                                                                                                                                                                                                              |
|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | PerformanceNIC                                                                                                                                                                                                                                                                                                                                                                                                            |
| 测试目的 | 目标软件在稳定运行期间的系统资源网卡的波动异常检测。                                                                                                                                                                                                                                                                                                                                                                      |
| 预置条件 | 软件已成功安装。 已获取软件操作指导书。 安装完测试工具。 确定性能压力场景，获取性能压力场景测试方法。                                                                                                                                                                                                                                                                                                                     |
| 测试步骤 | 1. 启动被测软件。 根据性能压力场景测试方法配置压力测试环境。 运行测试工具，进行性能压力测试15min，有预期结果A。 <br>2.执行如下命令，启动系统资源监控，每隔一分钟中统计一次数据。 \# sar -n DEV 60 15 \>\> /tmp/network_stability.log。 <br>3. 重复执行步骤1、2共三次，采集三组统计数据，有预期结果B。 <br>4. 执行如下命令，观察系统日志warning、error、fail信息，有预期结果C。 \# cat /var/log/messages \| egrep -i 'warning\|error\|fail' <br>5. 关闭被测软件，有预期结果D。 |
| 预期结果 | [A] 软件成功启动，测试工具对被测软件正常压测。 <br>[B] 查看network_stability.log日志记录，对比不同组测试结果的rxkB/s和txkB/s两列记录数据，同个时间段相互比较波动不超过5%。 <br>[C] /var/log/messages日志没有新增的关于被测软件相关的warning、error、fail信息。 <br>[D] 软件正常被关闭。                                                                                                                                                       |
| 备注     | 要求测试报告保留network_stability.log和/var/log/messages日志文件。 部分场景下，监控资源长稳过程中表现，在刚启动和关闭阶段会有较大的波动。此时建议数据在稳定期进行比较，开始前3min和关闭前3min数据可不参加比较。                                                                                                                                                                                                           |

### 压力长稳测试

1.  压力长稳测试

| 用例名称 | 压力长稳测试                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | StabilityLongTerm                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 测试目的 | 目标软件在压力测试下能够长时间稳定运行，且指标数据波动范围在预期范围内。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 预置条件 | 软件已成功安装。 已获取软件操作指导书。 安装完测试工具。 确定典型的业务压力场景，获取业务压力场景测试方法。 假设业务场景为X、Y、Z等。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 测试步骤 | 根据业务压力场景测试方法配置压力测试环境。 启动被测软件。 运行测试工具，进行业务压力X测试1h。 业务压力X测试过程中，执行如下命令，启动系统资源监控，每隔一分钟中统计一次数据。 \# sar -u 60 60 \>\> /tmp/cpu_stability.log  \# sar -r 60 60 \>\> /tmp/memory_stability.log  \# sar -d -p 60 60 \>\> /tmp/disk_stability.log  \# sar -n DEV 60 60 \>\> /tmp/network_stability.log 测试场景X完成后，关闭软件。 重复步骤1\~5，将被测业务压力轮询改成场景Y、Z等。一共进行12次业务压力场景测试，每次持续1h，一共12h。 打开记录的脚本，比较每一个小时内的cpu、内存、硬盘、网络数据，预期结果为A。 执行如下命令，观察系统日志warning、error、fail信息，有预期结果B。 \# cat /var/log/messages \| egrep -i 'warning\|error\|fail' 关闭被测软件，有预期结果C。 |
| 预期结果 | [A] 查看cpu_stability.log、memory_stability.log、network_stability.log、disk_stability.log日志记录，分别观察%idle、%memused、%util、rxkB/s和txkB/s日志列记录的数据，每次（1h）业务场景列数据相互比较波动不超过5%。 [B] /var/log/messages日志没有新增的关于被测软件相关的warning、error、fail信息。 [C] 软件正常被关闭。                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 备注     | 要求测试报告保留pu_stability.log、memory_stability.log、network_stability.log、disk_stability.log日志文件 部分场景下，监控资源长稳过程中表现，在刚启动和关闭阶段会有较大的波动。此时建议数据在稳定期进行比较，开始前5min和关闭前5min数据可不参加比较。 如果场景只有1个，那么循环此场景12次，保证长稳时间达标。                                                                                                                                                                                                                                                                                                                                                                                                                                       |

## 安全测试

### 端口安全测试

1.  端口安全测试

| 用例名称 | 端口安全测试                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SecurityPortScan                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 测试目的 | 目标软件在运行期间的监控端口是否与端口矩阵中的端口信息一致。                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 预置条件 | 软件正常安装，已完成配置。 已安装nmap扫描工具。 已关闭被测服务器的防火墙。 获取软件对应的端口矩阵。                                                                                                                                                                                                                                                                                                                                                                                      |
| 测试步骤 | 按照软件运行指导书运行软件。 正常启动软件，保证一定的运行压力，执行如下命令，进行端口扫描，记录扫描结果，有预期结果A。 nmap端口扫描命令： TCP Scan：nmap -sS -A -v --reason -p- -n -Pn -oA tcp192.168.18.231 192.168.18.231 （IP地址为被测环境的任意IP）  UDP Scan：nmap -sU -A -v --reason -p- -n -Pn -T4 -oA udp192.168.18.231 192.168.18.231 （IP地址为被测环境的任意IP）  Protocol Scan：nmap -sO -v --reason -n -oA proto192.168.18.231 192.168.18.231 （IP地址为被测环境的任意IP） |
| 预期结果 | [A] 没有开放端口矩阵以外的端口。                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 备注     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

### 病毒扫描

1.  病毒扫描测试

| 用例名称 | 病毒扫描                                                                                                      |
|----------|---------------------------------------------------------------------------------------------------------------|
| 用例编号 | SecurityVirusScan                                                                                             |
| 测试目的 | 对目标软件及目标软件依赖的软件包进行病毒扫描。                                                                |
| 预置条件 | 安装clamav软件。 目标软件正常安装，并完成相关配置。                                                           |
| 测试步骤 | 安装clamav软件。 按照clamav软件使用指导对目标软件及目标软件依赖的软件包进行扫描。 分析扫描结果，有预期结果A。 |
| 预期结果 | [A] 目标软件及目标软件依赖的软件包没有病毒。                                                                  |
| 备注     |                                                                                                               |

### CVE漏洞扫描

1.  CVE漏洞扫描测试

| 用例名称 | CVE漏洞扫描                                                                                                                                                      |
|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 用例编号 | SecurityCVEScan                                                                                                                                                  |
| 测试目的 | 对目标软件及目标软件依赖的软件包进行CVE漏洞扫描检查。                                                                                                            |
| 预置条件 | 目标软件正常安装，并完成配置。 安装CVE漏洞扫描软件openVAS。                                                                                                      |
| 测试步骤 | 安装openVAS软件，并保证正常运行。 创建目标软件及目标软件依赖软件包的漏洞扫描任务。 对目标软件及目标软件依赖的软件包进行CVE漏洞扫描。 分析扫描结果，有预期结果A。 |
| 预期结果 | [A] 没有发现目标软件及所依赖软件的CVE漏洞。                                                                                                                      |
| 备注     |                                                                                                                                                                  |

# 测试报告

依据本文件的测试报告应该包含以下测试环境信息：

-   待测服务器硬件配置（包括但不限于处理器、内存、磁盘、网卡等）；

-   待测服务器软件配置（包括但不限于操作系统、大数据、数据库等）；

-   负载主机软件、硬件配置；

-   测试机软件、硬件配置；

-   测试工具版本及配置；

# 参考文献

[1] compass-ci工具：<https://gitee.com/openeuler/compass-ci.git>

# 修订记录

| **文档版本** | 发布日期   | 作者         | 评审人                 | 修改说明                                                                                                                   |
|--------------|------------|--------------|------------------------|----------------------------------------------------------------------------------------------------------------------------|
| 1.0          | 2021-01-15 | 张永正、李萍 | 兼容性SIG组            | 第1次正式发布                                                                                                              |
| 0.9          | 2021-11-26 | 张永正、李萍 | 李君弋、钟海鹏、杨少洪 | 内部初评文稿，主要内容如下： 确定测试范围、测试工具、测试对象等； 划分测试维度 输出测试方案和测试用例 其他格式及细节的修改 |
